<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cinema</title>
    <script src="https://code.jquery.com/jquery-1.11.3.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<nav>
    <div class="nav nav-tabs" id="primary-tab" role="tablist">
        <button class="nav-link active" id="nav-film-tab" data-bs-toggle="tab" data-bs-target="#nav-film" type="button" role="tab" aria-controls="nav-film" aria-selected="true">Film</button>
        <button class="nav-link" id="nav-actor-tab" data-bs-toggle="tab" data-bs-target="#nav-actor" type="button" role="tab" aria-controls="nav-actor" aria-selected="false">Actor</button>
        <button class="nav-link" id="nav-producer-tab" data-bs-toggle="tab" data-bs-target="#nav-producer" type="button" role="tab" aria-controls="nav-producer" aria-selected="false">Producer</button>
        <button class="nav-link" id="nav-country-tab" data-bs-toggle="tab" data-bs-target="#nav-country" type="button" role="tab" aria-controls="nav-country" aria-selected="false">Country</button>
        <button class="nav-link" id="nav-company-tab" data-bs-toggle="tab" data-bs-target="#nav-company" type="button" role="tab" aria-controls="nav-company" aria-selected="false">Company</button>
        <button class="nav-link" id="nav-genre-tab" data-bs-toggle="tab" data-bs-target="#nav-genre" type="button" role="tab" aria-controls="nav-genre" aria-selected="false">Genre</button>
        <button class="nav-link" id="nav-advert-type-tab" data-bs-toggle="tab" data-bs-target="#nav-advert-type" type="button" role="tab" aria-controls="nav-advert-type" aria-selected="false">Genre</button>
    </div>
</nav>
<div class="tab-content" id="secondary-tabContent">
    <div class="tab-pane fade show active" id="nav-film" role="tabpanel" aria-labelledby="nav-film-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-film-tab" role="tablist">
                <button class="nav-link active" id="nav-film-create-tab" data-bs-toggle="tab" data-bs-target="#nav-film-create" type="button" role="tab" aria-controls="nav-film-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-film-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-film-delete" type="button" role="tab" aria-controls="nav-film-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-film-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-film-edit" type="button" role="tab" aria-controls="nav-film-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-actor" role="tabpanel" aria-labelledby="nav-actor-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-actor-tab" role="tablist">
                <button class="nav-link active" id="nav-actor-create-tab" data-bs-toggle="tab" data-bs-target="#nav-actor-create" type="button" role="tab" aria-controls="nav-actor-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-actor-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-actor-delete" type="button" role="tab" aria-controls="nav-actor-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-actor-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-actor-edit" type="button" role="tab" aria-controls="nav-actor-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-producer" role="tabpanel" aria-labelledby="nav-producer-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-producer-tab" role="tablist">
                <button class="nav-link active" id="nav-producer-create-tab" data-bs-toggle="tab" data-bs-target="#nav-producer-create" type="button" role="tab" aria-controls="nav-producer-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-producer-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-producer-delete" type="button" role="tab" aria-controls="nav-producer-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-producer-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-producer-edit" type="button" role="tab" aria-controls="nav-producer-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-country" role="tabpanel" aria-labelledby="nav-country-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-country-tab" role="tablist">
                <button class="nav-link active" id="nav-country-create-tab" data-bs-toggle="tab" data-bs-target="#nav-country-create" type="button" role="tab" aria-controls="nav-country-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-country-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-country-delete" type="button" role="tab" aria-controls="nav-country-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-country-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-country-edit" type="button" role="tab" aria-controls="nav-country-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-company" role="tabpanel" aria-labelledby="nav-company-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-company-tab" role="tablist">
                <button class="nav-link active" id="nav-company-create-tab" data-bs-toggle="tab" data-bs-target="#nav-company-create" type="button" role="tab" aria-controls="nav-company-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-company-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-company-delete" type="button" role="tab" aria-controls="nav-company-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-company-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-company-edit" type="button" role="tab" aria-controls="nav-company-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-genre" role="tabpanel" aria-labelledby="nav-genre-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-genre-tab" role="tablist">
                <button class="nav-link active" id="nav-genre-create-tab" data-bs-toggle="tab" data-bs-target="#nav-genre-create" type="button" role="tab" aria-controls="nav-genre-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-genre-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-genre-delete" type="button" role="tab" aria-controls="nav-genre-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-genre-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-genre-edit" type="button" role="tab" aria-controls="nav-genre-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
    <div class="tab-pane fade" id="nav-advert-type" role="tabpanel" aria-labelledby="nav-advert-type-tab">
        <nav>
            <div class="nav nav-tabs" id="primary-advert-type-tab" role="tablist">
                <button class="nav-link active" id="nav-advert-type-create-tab" data-bs-toggle="tab" data-bs-target="#nav-advert-type-create" type="button" role="tab" aria-controls="nav-advert-type-create" aria-selected="true">Create</button>
                <button class="nav-link" id="nav-advert-type-delete-tab" data-bs-toggle="tab" data-bs-target="#nav-advert-type-delete" type="button" role="tab" aria-controls="nav-advert-type-delete" aria-selected="false">Delete</button>
                <button class="nav-link" id="nav-advert-type-edit-tab" data-bs-toggle="tab" data-bs-target="#nav-advert-type-edit" type="button" role="tab" aria-controls="nav-advert-type-edit" aria-selected="false">Edit</button>
            </div>
        </nav>
    </div>
</div>
<div class="tab-content" id="actor-tabContent">
    <div id="nav-actor-create" class="tab-pane fade" role="tabpanel" aria-labelledby="nav-actor-create">
        <div class="input-group mb-3">
            <label for="actorFIO" class="form-label">ФИО</label>
            <input type="text" class="form-control" id="actorFIO" dtoAttribute="fio" placeholder="Введите ФИО актера">
        </div>
        <div class="input-group mb-3">
            <button type="button" class="btn btn-primary submit" url="/v1/actor/create">Primary</button>
        </div>
    </div>
    <div id="nav-actor-delete" class="tab-pane fade" role="tabpanel" aria-labelledby="nav-actor-delete">
        <div class="input-group mb-3">
            <label for="actorIdToDelete" class="form-label">Выберите актера из списка</label>
            <select class="form-select" id="actorIdToDelete" dtoAttribute="id" aria-label="Default select example">
                <option selected>Выберите актера из списка</option>
            </select>
        </div>
        <div class="input-group mb-3">
            <button type="button" class="btn btn-primary submit" url="/v1/actor/remove">Primary</button>
        </div>
    </div>
    <div id="nav-actor-edit" class="tab-pane fade" role="tabpanel" aria-labelledby="nav-actor-edit-tab">
        <div class="input-group mb-3">
            <label for="actorIdToEdit" class="form-label">Выберите актера из списка</label>
            <select class="form-select" id="actorIdToEdit" dtoAttribute="id" aria-label="Default select example">
                <option selected>Выберите актера из списка</option>
            </select>
        </div>
        <div class="input-group mb-3">
            <label class="form-label">ФИО</label>
            <input type="text" class="form-control" dtoAttribute="fio" placeholder="Введите ФИО актера">
        </div>
        <div class="input-group mb-3">
            <button type="button" class="btn btn-primary submit" url="/v1/actor/update">Primary</button>
        </div>
    </div>
</div>
<script>

    (function( $ ){
        function onTabChangeListener(){
            $('#secondary-tabContent .nav-link').click(function(){
                $($(this).attr('data-bs-target')).addClass('show');
            })
        };
        function postRequest(url, obj){
            debugger;
            $.ajax({
                type: "POST",
                url: url,
                data: JSON.stringify(obj),
                dataType: "json",'contentType': 'application/json'
            }).done(function(data) {
                debugger;
            });
        }

        function getRequest(url, handler) {
            $.ajax({
                type: "GET",
                url: url,
                dataType: "json",'contentType': 'application/json'
            }).done(handler);
        }

        function onDelete() {
            let handler = function(data) {
                for(let x in data){
                    $('#actorIdToDelete').append($('<option>', {
                        value: data[x].id,
                        text: data[x].fio
                    }));
                }
            };
            getRequest('/v1/actor/read',handler);
        }

        function onUpdate() {
            let handler = function(data) {
                for(let x in data){
                    $('#actorIdToEdit').append($('<option>', {
                        value: data[x].id,
                        text: data[x].fio
                    }));
                }
            };
            getRequest('/v1/actor/read',handler);
        }

        function addActorListeners() {
            onDelete();
            onUpdate();
        }

        function addSubmitButtonsListeners() {
            $('button.submit').click(function(){
                debugger;
                let element = $(this),
                    url = element.attr('url'),
                    panel = element.parents('.tab-pane').first(),
                    inputFields = panel.find('input, select');
                var obj = {},
                    x = 0;
                while(x<inputFields.length){
                    let el = $(inputFields[x]),
                        dtoAttribute = el.attr('dtoattribute');
                    if(el.is(':input')){
                        obj[dtoAttribute] = el.val();
                    }
                    else if(el.is(':select')){
                        obj[dtoAttribute] = el.val();
                    }
                    x++;
                }
                postRequest(url, obj);
            })
        }

        $('document').ready(function(){
            onTabChangeListener();
            addSubmitButtonsListeners();
            addActorListeners();
        });
    })( jQuery );
</script>
</body>
</html>
